<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVG Control Points</title>
    <style>
      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .file-inputs,
      .controls {
        margin-bottom: 20px;
      }
      .image-container {
        position: relative;
        display: inline-block;
        margin-bottom: 20px;
      }
      .svg-container {
        position: relative;
        display: inline-block;
      }
      .bitmap,
      .svg {
        max-width: 100%;
        height: auto;
      }
      .resize-handle {
        position: absolute;
        width: 10px;
        height: 10px;
        background-color: #007bff;
        border: 1px solid #ffffff;
        border-radius: 50%;
      }
      .resize-handle.nw {
        top: -5px;
        left: -5px;
        cursor: nw-resize;
      }
      .resize-handle.ne {
        top: -5px;
        right: -5px;
        cursor: ne-resize;
      }
      .resize-handle.sw {
        bottom: -5px;
        left: -5px;
        cursor: sw-resize;
      }
      .resize-handle.se {
        bottom: -5px;
        right: -5px;
        cursor: se-resize;
      }
      .svg-container:focus-within .resize-handle {
        display: block;
      }
      .svg-container:not(:focus-within) .resize-handle {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="file-inputs">
        <button id="loadBitmap">Load Bitmap</button>
        <button id="loadSVG">Load SVG</button>
      </div>

      <div class="image-container">
        <img class="bitmap" src="" alt="Bitmap Image" />

        <div class="svg-container" tabindex="0">
          <img class="svg" src="" alt="SVG Image" />
          <div class="resize-handle nw"></div>
          <div class="resize-handle ne"></div>
          <div class="resize-handle sw"></div>
          <div class="resize-handle se"></div>
        </div>
      </div>

      <div class="controls">
        <button id="zoomIn">Zoom In</button>
        <button id="zoomOut">Zoom Out</button>
        <button id="growSVG">Grow SVG</button>
        <button id="shrinkSVG">Shrink SVG</button>
      </div>

      <div id="colorInfo"></div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const svgContainer = document.querySelector(".svg-container");
        const svg = svgContainer.querySelector(".svg");

        // Show handles when SVG container is focused
        svgContainer.addEventListener("focus", function () {
          this.querySelectorAll(".resize-handle").forEach(
            (handle) => (handle.style.display = "block")
          );
        });

        // Hide handles when focus is lost
        svgContainer.addEventListener("blur", function () {
          this.querySelectorAll(".resize-handle").forEach(
            (handle) => (handle.style.display = "none")
          );
        });

        // Prevent hiding handles when clicking inside the SVG container
        svgContainer.addEventListener("mousedown", function (e) {
          e.preventDefault();
          this.focus();
        });

        // Placeholder functions for buttons
        document
          .getElementById("loadBitmap")
          .addEventListener("click", function () {
            console.log("Load Bitmap clicked");
            // Implement bitmap loading logic here
          });

        document
          .getElementById("loadSVG")
          .addEventListener("click", function () {
            console.log("Load SVG clicked");
            // Implement SVG loading logic here
          });

        document
          .getElementById("zoomIn")
          .addEventListener("click", function () {
            console.log("Zoom In clicked");
            // Implement zoom in logic here
          });

        document
          .getElementById("zoomOut")
          .addEventListener("click", function () {
            console.log("Zoom Out clicked");
            // Implement zoom out logic here
          });

        document
          .getElementById("growSVG")
          .addEventListener("click", function () {
            console.log("Grow SVG clicked");
            // Implement SVG growth logic here
          });

        document
          .getElementById("shrinkSVG")
          .addEventListener("click", function () {
            console.log("Shrink SVG clicked");
            // Implement SVG shrink logic here
          });

        // Placeholder for resize logic
        const resizeHandles = document.querySelectorAll(".resize-handle");
        resizeHandles.forEach((handle) => {
          handle.addEventListener("mousedown", function (e) {
            console.log("Resize started");
            // Implement resize logic here
          });
        });
      });
    </script>
  </body>
</html>
